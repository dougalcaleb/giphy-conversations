<app-header></app-header>
<div class="page">
	<app-chat-list></app-chat-list>
	<div class="wrap">
		<div class="info">
			<h1>Conversation 1</h1>
			<p (click)="toggleModal()">i</p>
		</div>
		<div class="messages" id="messages" #messageWrapper>

			<div *ngFor="let message of messages" class="message-wrap {{message.type}}">
				<div class="user" style="background-image: url({{message.senderPhotoURL}})"></div>
				<div class="img">
               <video autoplay loop disablePictureInPicture disableRemotePlayback muted="true" preload="auto" src="{{message.url}}">Your browser does not support embedded video.</video>
					<div class="imginfo">
						<p>{{message.time}} from {{message.senderName}}</p>
						<img src="{{ message.heart }}" class="heart" (click)="heartToggle(message.url)" />
					</div>
				</div>
			</div>

         <!-- <div class="message-wrap sent">
				<div class="user"></div>
				<div class="img">
               <video autoplay loop src="https://media0.giphy.com/media/uQvxobRExS9nG/giphy.mp4?cid=1480d408mmg9n7yya1yopwn6jnrtj4cdlnx6ljglkkb2xslq&rid=giphy.mp4&ct=g"></video>
					<div class="imginfo">
						<p>3 minutes ago</p>
						<img src="{{ heart }}" alt="" class="heart" (click)="heartToggle()" />
					</div>
				</div>
         </div>
         <div class="message-wrap sent">
				<div class="user"></div>
				<div class="img">
               <video autoplay loop src="https://media0.giphy.com/media/uQvxobRExS9nG/giphy.mp4?cid=1480d408mmg9n7yya1yopwn6jnrtj4cdlnx6ljglkkb2xslq&rid=giphy.mp4&ct=g"></video>
					<div class="imginfo">
						<p>3 minutes ago</p>
						<img src="{{ heart }}" alt="" class="heart" (click)="heartToggle()" />
					</div>
				</div>
         </div>
         <div class="message-wrap">
				<div class="user"></div>
				<div class="img">
               <video autoplay loop src="https://media0.giphy.com/media/uQvxobRExS9nG/giphy.mp4?cid=1480d408mmg9n7yya1yopwn6jnrtj4cdlnx6ljglkkb2xslq&rid=giphy.mp4&ct=g"></video>
					<div class="imginfo">
						<p>3 minutes ago</p>
						<img src="{{ heart }}" alt="" class="heart" (click)="heartToggle()" />
					</div>
				</div>
         </div> -->

			<!-- <app-message></app-message>
			<app-message></app-message>
			<app-message></app-message>
			<app-message></app-message>
			<app-message></app-message>
			<app-message></app-message>
			<app-message></app-message>
			<app-message></app-message> -->
		</div>
		<div class="send">
			<input type="text" placeholder="Search for a GIF" [(ngModel)]="searchTerm" (keydown)="search($event)"/>
			<button class="favorites" (click)="openFavorites()"><img src="assets/heart.png"></button>
			<button class="cancelPicker" (click)="cancelGifPicker()">Cancel</button>
			<!-- <button class="msgSend">Send</button> -->
			<div class="gradient"></div>

         <div class="closeGifPicker" (click)="closeGifPicker()" *ngIf="retrieved"></div>

         <div class="gifs" *ngIf="retrieved">
            <div class="exitGifPicker" (click)="closeGifPicker()"></div>
            <span *ngFor="let gif of searchResult;" (click)="selectGif(gif.images.original.mp4)">
               <video autoplay loop src={{gif.images.fixed_height.mp4}}></video>
               <div class="spinner-wrap">
                  <mat-progress-spinner mode="indeterminate" diameter="50"></mat-progress-spinner>
               </div>
            </span>
            <span class="load-more" (click)="loadMore()">
               <svg viewBox="0 0 24 24">
                  <path fill="currentColor" d="M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z" />
              </svg>
              <p>Load More</p>
            </span>
         </div>

         <div class="gifs-favorite" *ngIf="choosingFavorite">
            <div class="exitFavoritePicker" (click)="closeFavorites()"></div>
            <span *ngFor="let gif of Store.activeUser_Firebase.favoritedGifs;" (click)="selectGif(gif)">
               <video autoplay loop src={{gif}}></video>
               <div class="spinner-wrap">
                  <mat-progress-spinner mode="indeterminate" diameter="50"></mat-progress-spinner>
               </div>
            </span>
            <span class="no-favorites" *ngIf="Store.activeUser_Firebase.favoritedGifs.length == 0">
              <p>No favorited GIFs</p>
            </span>
         </div>

         <div class="scrollToBottom" title="Scroll to bottom" (click)="scrollToBottom()" *ngIf="!scrolled">
            <svg viewBox="0 0 24 24">
               <path fill="currentColor" d="M11,4H13V16L18.5,10.5L19.92,11.92L12,19.84L4.08,11.92L5.5,10.5L11,16V4Z" />
           </svg>
         </div>

		</div>

      

	</div>
	<app-test-chatlist></app-test-chatlist>
</div>
