<app-header></app-header>

<div class="sidebar">
	<p class="group-name">{{ Store.activeChatMeta.name }}</p>
	<div class="members">
		<app-user-profile
			*ngFor="let user of Store.activeChatMembers"
			[uid]="user.uid"
			[photoURL]="user.photoURL"
			[username]="user.username"
			[userRemoval]="false"
         [interact]="false"
		></app-user-profile>
	</div>
	<div class="other">
		<button class="back" [routerLink]="['/chatlist']">
			<svg viewBox="0 0 24 24">
				<path fill="currentColor" d="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z" />
			</svg>
			Your chats
		</button>
		<button class="settings" (click)="openSettings()">
			<svg viewBox="0 0 24 24">
				<path
					fill="currentColor"
					d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"
				/>
			</svg>
		</button>
	</div>
</div>

<div class="chat">
   <div class="chat-messages" #messageWrapper>
      <app-message [message]="testMessageSelf"></app-message>
      <app-message [message]="testMessageOther"></app-message>
      <app-message [message]="testMessageOther"></app-message>
      <app-message [message]="testMessageSelf"></app-message>
      <app-message [message]="testMessageSelf"></app-message>
      <app-message [message]="testMessageOther"></app-message>
   </div>
	<div class="chat-controls">
      <div class="gif-picker-closer" *ngIf="retrievedGifs.length > 0" (click)="closeGifPicker()"></div>
      <div class="gif-picker" *ngIf="retrievedGifs.length > 0">
         <div class="gif" *ngFor="let gif of retrievedGifs">
            <video autoplay loop disablePictureInPicture disableRemotePlayback muted="true" preload="auto" src={{gif.images.fixed_height.mp4}}></video>
            <app-spinner [size]="40"></app-spinner>
         </div>

         <div class="load-more gif" (click)="loadMoreGifs()">
            <svg viewBox="0 0 24 24">
               <path fill="currentColor" d="M8,13H10.55V10H13.45V13H16L12,17L8,13M19.35,10.04C21.95,10.22 24,12.36 24,15A5,5 0 0,1 19,20H6A6,6 0 0,1 0,14C0,10.91 2.34,8.36 5.35,8.04C6.6,5.64 9.11,4 12,4C15.64,4 18.67,6.59 19.35,10.04M19,18A3,3 0 0,0 22,15C22,13.45 20.78,12.14 19.22,12.04L17.69,11.93L17.39,10.43C16.88,7.86 14.62,6 12,6C9.94,6 8.08,7.14 7.13,8.97L6.63,9.92L5.56,10.03C3.53,10.24 2,11.95 2,14A4,4 0 0,0 6,18H19Z" />
           </svg>
           <p>Load More</p>
         </div>
      </div>
      <div class="scroll-to-bottom" *ngIf="stbBtnIsVisible" (click)="scrollToBottom()">
         <svg viewBox="0 0 24 24">
            <path fill="currentColor" d="M12 20.03C16.41 20.03 20.03 16.41 20.03 12C20.03 7.59 16.41 3.97 12 3.97C7.59 3.97 3.97 7.59 3.97 12C3.97 16.41 7.59 20.03 12 20.03M12 22C6.46 22 2 17.54 2 12C2 6.46 6.46 2 12 2C17.54 2 22 6.46 22 12C22 17.54 17.54 22 12 22M11 13.54H8L12 17.5L16 13.54H13V6.5H11" />
        </svg>
      </div>
		<input type="text" placeholder="Search for a GIF" (keydown)="handleInputKeydown($event)"/>
		<div class="controls-button favorite-toggle" title="Favorite GIFs">
			<svg viewBox="0 0 24 24">
				<path
					fill="currentColor"
					d="M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5C2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z"
				/>
			</svg>
		</div>
	</div>
</div>
